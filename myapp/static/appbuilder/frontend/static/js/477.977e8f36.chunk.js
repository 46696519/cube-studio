"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[477],{7477:function(e,n,t){t.r(n),t.d(n,{default:function(){return ge}});var a=t(3433),r=t(4942),i=t(1413),c=t(9439),o=t(4519),l=t(6245),s=t(11),u=t(2496),d=t(2574),f=t(89),m=t(6874),h=t(9775),p=t(1449),Z=t(3849),v=t(5492),x=t(2704),g=t(2513),j=t(2085),y=t(7167),b=t(2577),S=t(2556),k=b.Z.Title,_=function(e){var n={position:"sticky",top:0};return(0,S.jsxs)(v.Z,{className:"title-header",justify:"space-between",align:"middle",style:e.noBorderBottom?(0,i.Z)({borderBottom:"none"},n):n,children:[(0,S.jsxs)("div",{children:[(0,S.jsx)(k,{className:"d-il mr12",level:5,style:{marginBottom:10},children:e.title}),(0,S.jsx)("div",{className:"d-il",children:e.breadcrumbs})]}),(0,S.jsx)(x.Z,{children:(0,S.jsx)(s.Z,{children:e.children?e.children:null})})]})},w=t(4925),C=t(8532),N=t(575),O=t(5738),I=t(4745),P=t(602),F=t(4520),T=t.n(F),E=t(4308),V=["onResize","width"],M=t(7972),H=function(){return(0,S.jsxs)(v.Z,{justify:"center",align:"middle",style:{height:360,flexDirection:"column"},children:[(0,S.jsx)("img",{src:P,style:{width:266},alt:""}),(0,S.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})]})},z=function(e){var n=e.onResize,t=e.width,a=(0,w.Z)(e,V);return t?(0,S.jsx)(E.Resizable,{width:t,height:0,handle:(0,S.jsx)("span",{className:"react-resizable-handle",onClick:function(e){e.stopPropagation()}}),onResize:n,draggableOpts:{enableUserSelectHack:!1},children:(0,S.jsx)("th",(0,i.Z)((0,i.Z)({},a),{},{style:(0,i.Z)((0,i.Z)({},null===a||void 0===a?void 0:a.style),{},{userSelect:"none"})}))}):(0,S.jsx)("th",(0,i.Z)({},a))},R=function(e){var n=(0,o.useState)(!1),t=(0,c.Z)(n,2),r=t[0],l=t[1],u=(0,o.useState)({header:[],data:[]}),d=(0,c.Z)(u,2),h=d[0],p=d[1],Z=(0,o.useState)([]),j=(0,c.Z)(Z,2),y=j[0],b=j[1],k=(0,o.useState)(e.columns),_=(0,c.Z)(k,2),w=_[0],P=_[1],F=function(n){return function(t,r){var c=r.size;if(!(c.width<100)){var o=(0,a.Z)(w);o[n]=(0,i.Z)((0,i.Z)({},o[n]),{},{width:c.width});var l=o.reduce((function(e,n){return e+n.width||100}),0)+200;localStorage.setItem(e.tableKey||"",JSON.stringify(o)),L((0,i.Z)((0,i.Z)({},D),{},{x:l})),P(o)}}},E=w.map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{width:e.width||200,onHeaderCell:function(e){return{width:e.width,onResize:F(n)}}})})),V=(0,o.useState)(e.scroll),R=(0,c.Z)(V,2),D=R[0],L=R[1];(0,o.useEffect)((function(){P(e.columns)}),[e.columns]),(0,o.useEffect)((function(){L(e.scroll)}),[e.scroll]),(0,o.useEffect)((function(){if(e.dataSource){var n=e.columns.filter((function(e){return~y.indexOf(e.dataIndex)}));J(n,e.dataSource)}}),[e.dataSource,e.columns]);var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=e.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e})),a=e.map((function(e){return e.title})).filter((function(e){return"\u64cd\u4f5c"!==e})),r=[];n.forEach((function(e){var n={};t.map((function(t){var a=e[t];n[t]=a||""})),r.push(n)})),p({header:a,data:r})},K=function(){var e=h.header,n=h.data,t="";return e.length&&n.length?(t="|"+e.join("|")+"|\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+"|"+n.join("|")+"|\n"}))):t="",t},q=function(){var e=h.header,n=h.data,t="";return e.length&&n.length?(t=e.join("\t")+"\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+n.join("\t")+"\n"}))):t="",t};return(0,S.jsxs)(s.Z,{className:"tablebox",direction:"vertical",size:"middle",children:[(0,S.jsxs)(m.Z,{width:1e3,maskClosable:!1,centered:!0,bodyStyle:{maxHeight:500,overflow:"auto"},visible:r,title:"\u5bfc\u51fa\u6570\u636e",onCancel:function(){l(!1)},footer:null,children:[(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsxs)("div",{className:"mb16",children:[(0,S.jsx)("span",{className:"pr8",children:"\u9009\u62e9\u9700\u8981\u5bfc\u51fa\u7684\u5217\uff1a"}),(0,S.jsx)(C.Z.Group,{options:e.columns.map((function(e){return{label:e.title,value:e.dataIndex}})).filter((function(e){return"handle"!==e.value})),defaultValue:[],value:y,onChange:function(n){b(n);var t=e.columns.filter((function(e){return~n.indexOf(e.dataIndex)}));J(t,e.dataSource)}})]}),(0,S.jsxs)("div",{style:{position:"absolute",right:0,bottom:0},children:[(0,S.jsx)(g.Z,{size:"small",type:"link",onClick:function(){b(e.columns.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e}))),J(e.columns,e.dataSource)},children:"\u5168\u9009"}),(0,S.jsx)(g.Z,{size:"small",type:"link",onClick:function(){b([]),J([],e.dataSource)},children:"\u53cd\u9009"})]})]}),(0,S.jsxs)(N.Z,{children:[(0,S.jsx)(N.Z.TabPane,{tab:"Wiki\u683c\u5f0f",children:(0,S.jsx)(M,{text:K(),onCopy:function(){return f.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,S.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,S.jsx)("code",{children:K()})})})},"jira"),(0,S.jsx)(N.Z.TabPane,{tab:"Text\u683c\u5f0f",children:(0,S.jsx)(M,{text:q(),onCopy:function(){return f.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,S.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,S.jsx)("code",{children:q()})})})},"test"),(0,S.jsx)(N.Z.TabPane,{tab:"Excel\u683c\u5f0f",children:(0,S.jsx)(v.Z,{justify:"center",align:"middle",style:{minHeight:100},children:(0,S.jsx)(x.Z,{children:(0,S.jsx)(g.Z,{type:"primary",onClick:function(){var e={fileName:"result"};e.datas=[{sheetData:h.data,sheetName:"sheet",sheetHeader:h.header}],new(T())(e).saveExcel()},children:"\u5bfc\u51faExcel"})})})},"excel")]})]}),e.titleNode||e.buttonNode||!e.cancelExportData?(0,S.jsxs)(v.Z,{justify:"space-between",align:"middle",children:[(0,S.jsx)(x.Z,{children:(0,S.jsx)(s.Z,{align:"center",children:e.titleNode})}),(0,S.jsx)(x.Z,{children:(0,S.jsxs)(s.Z,{align:"center",children:[e.buttonNode,e.cancelExportData?null:(0,S.jsx)(g.Z,{style:{marginLeft:6},onClick:function(){return l(!0)},children:"\u5bfc\u51fa\u6570\u636e"})]})})]}):null,(0,S.jsx)(O.ZP,{renderEmpty:H,children:(0,S.jsx)(I.Z,{size:e.size||"middle",rowKey:e.rowKey?e.rowKey:"id",dataSource:e.dataSource,components:{header:{cell:z}},columns:E,pagination:!1!==e.pagination&&(0,i.Z)({},e.pagination),scroll:D,loading:e.loading,onChange:e.onChange,rowSelection:e.rowSelection})})]})},D=t(3077),L=t.n(D),J=t(3405),K=t(7669),q=t(3531),A=t(6713),B=t(558),G=t(8718),Y=t(8633),W=t(332),Q=t(6548),U=t(8977),X=function(e){var n=U.Z.useForm(),t=(0,c.Z)(n,1)[0],a=(0,o.useState)(),r=(0,c.Z)(a,2)[1];o.useCallback((function(){return r({})}),[]);(0,o.useEffect)((function(){e.formData&&t.setFieldsValue(e.formData)}),[e]);var i=(0,o.useState)({currentChange:{},allValues:{}}),l=(0,c.Z)(i,2),s=l[0],u=l[1];return(0,S.jsx)(m.Z,{destroyOnClose:!0,maskClosable:!1,width:e.width||680,visible:e.visible,title:e.title,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){t.resetFields(),e.onCancel()},onOk:function(){console.log(t.getFieldsValue()),t.validateFields().then((function(n){e.onCreate(n,t)})).catch((function(e){}))},children:(0,S.jsx)(Z.Z,{spinning:e.loading,children:(0,S.jsx)(U.Z,{onValuesChange:function(e,n){u({currentChange:e,allValues:n})},labelCol:{span:5},wrapperCol:{span:19},form:t,layout:"horizontal",name:"form_in_modal",children:e.children&&"[object Function]"===Object.prototype.toString.call(e.children)?e.children(t,s):e.children})})})},$=t(506),ee=t(5861),ne=t(7757),te=t.n(ne),ae=t(7474),re=t(7),ie=t(8501),ce=t(2340),oe=ae.Z.Option,le=function(e){var n=U.Z.useForm(),t=(0,c.Z)(n,1)[0],r=(0,o.useState)(!1),l=(0,c.Z)(r,2),s=l[0],u=l[1],d=(0,o.useState)([]),f=(0,c.Z)(d,2),m=(f[0],f[1],function(e){return(e||[]).map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{indexKey:n})}))}),h=(0,o.useState)(m(e.params)),p=(0,c.Z)(h,2),Z=p[0],j=p[1],y=(0,o.useState)(m(e.params)),b=(0,c.Z)(y,2),k=b[0],_=b[1],w=(0,o.useState)(new Map),C=(0,c.Z)(w,2),N=C[0],O=C[1];(0,o.useEffect)((function(){if(e.values){var n=e.values.length?e.values:[{key:void 0,value:void 0}];t.setFieldsValue({group:n});for(var r=(0,a.Z)(k),i=0;i<r.length;i++)for(var c=0;c<n.length;c++){void 0!==n[c]&&n[c].key===r[i].name&&(r[i].used=!0)}_(r)}}),[e.values]),(0,o.useEffect)((function(){if(e.params&&e.params.length){var n=m(e.params);j(n);for(var t=N,a=0;a<n.length;a++){var r=n[a];t.set(r.name,r)}O(t)}}),[e.params]);var I=function(){var n=(0,ee.Z)(te().mark((function n(t){var a,r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(t),a=t.group.filter((function(e){return!!e.key})),r=a.map((function(e){return{key:e.key,value:e.value}})),e.onChange(r);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),P=function(e){var n=t.getFieldValue(["group",e,"key"]);if(!n)return(0,S.jsx)(re.Z,{style:{width:"65%"},onPressEnter:function(){return F()}});var a=N.get(n);if("input"===(null===a||void 0===a?void 0:a.type))return(0,S.jsx)(re.Z,{style:{width:"65%"},defaultValue:a.defalutValue,placeholder:a.placeHolder,onPressEnter:function(){return F()}});if("select"===(null===a||void 0===a?void 0:a.type)){var r=(null===a||void 0===a?void 0:a.option)||[];return(0,S.jsx)(ae.Z,{style:{width:"65%"},dropdownMatchSelectWidth:500,showSearch:!0,mode:"label"===n?"multiple":void 0,optionFilterProp:"label",options:r.map((function(e){return{label:e.label,value:e.value}}))})}},F=function(){t.validateFields()};return(0,S.jsxs)(U.Z,{className:"cmdb-mixsearch bg-title",form:t,onFinish:I,initialValues:{group:[{key:void 0,value:void 0}]},children:[(0,S.jsxs)(v.Z,{className:"cmdb-mixsearch-content",gutter:16,style:(0,i.Z)({marginLeft:0,marginRight:0},s?{height:70}:{height:"auto"}),children:[(0,S.jsx)(U.Z.List,{name:"group",children:function(e,n){var r=n.add,i=n.remove;return(0,S.jsxs)(S.Fragment,{children:[e.map((function(e,n){return(0,S.jsx)(x.Z,{span:8,children:(0,S.jsxs)(v.Z,{align:"middle",gutter:8,children:[(0,S.jsx)(x.Z,{className:"cmdb-mixsearch-group",children:(0,S.jsxs)(re.Z.Group,{compact:!0,children:[(0,S.jsx)(U.Z.Item,{noStyle:!0,name:[e.name,"key"],rules:[{required:!1,message:"\u8bf7\u9009\u62e9key"}],children:(0,S.jsx)(ae.Z,{style:{width:"35%"},placeholder:"\u8bf7\u9009\u62e9",onChange:function(e){!function(e){for(var n=(0,a.Z)(k),r=(t.getFieldValue("group")||[]).filter((function(e){return!!e})).map((function(e){return e.key})),i=0;i<n.length;i++){var c=n[i];c.name===e?n[i].used=!0:r.includes(c.name)||(n[i].used=!1)}_(n)}(e)},children:k.map((function(e,n){return(0,S.jsx)(oe,{style:{display:e.used?"none":"inherit"},value:e.name,children:e.title||e.name},"mixSearch_".concat(e.name,"_").concat(n))}))})}),(0,S.jsx)(U.Z.Item,{noStyle:!0,shouldUpdate:!0,name:[e.name,"value"],rules:[{required:!1,message:"\u8bf7\u586b\u5199value"}],children:P(n)})]})}),(0,S.jsx)(x.Z,{className:"cmdb-mixsearch-delete",onClick:function(){var e=(t.getFieldValue("group")||[]).map((function(e){return e?e.key:void 0})),r=(0,a.Z)(k);if(e[n])for(var c=0;c<r.length;c++){r[c].name===e[n]&&(r[c].used=!1)}_(r),i(n)},children:(0,S.jsx)(ie.Z,{})})]})},"mixSearch_".concat(e.key,"_").concat(n))})),Z.length!==e.length&&(0,S.jsx)(x.Z,{className:"cmdb-mixsearch-add d-il",onClick:function(){r()},children:(0,S.jsx)(B.Z,{})})]})}}),(0,S.jsx)(x.Z,{flex:1,children:(0,S.jsx)(v.Z,{justify:"end",children:(0,S.jsx)(g.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})})]}),(0,S.jsx)(v.Z,{className:"cmdb-mixsearch-collapsed",children:(0,S.jsx)(v.Z,{onClick:function(){u(!s)},justify:"center",align:"middle",children:s?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.Z,{children:"\u5c55\u5f00"}),(0,S.jsx)(x.Z,{children:(0,S.jsx)(K.Z,{})})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.Z,{children:"\u6536\u8d77"}),(0,S.jsx)(x.Z,{children:(0,S.jsx)(ce.Z,{})})]})})})]})},se=t(7709),ue=t(9311),de=t(0),fe=t(5262),me=t(4860),he=t(7517);function pe(e){var n,t=Math.random().toString(36).substring(2),a=(0,o.useState)(e.options||[]),r=(0,c.Z)(a,2),i=r[0],l=r[1],s=(0,o.useState)(e.value||""),u=(0,c.Z)(s,2),d=u[0],f=u[1];(0,o.useEffect)((function(){var n=e.isOpenSearchMatch?(e.options||[]).filter((function(e){return-1!==e.indexOf(d)})):e.options||[];l(n)}),[e.options]),(0,o.useEffect)((function(){f(e.value||"")}),[e.value]);var m=function(n){f(n),e.onChange&&e.onChange(n)},h=function(e){var n=d,t=e.indexOf(d);if(-1===t)return(0,S.jsx)("span",{children:e});var a=e.substring(0,t),r=e.substring(t+d.length);return(0,S.jsxs)("span",{children:[a,(0,S.jsx)("span",{className:"highlight",children:n}),r]})},p=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){e&&e.apply(null,[].concat(r))}),t)}}(e.onScrollButtom);return(0,S.jsxs)("div",{className:"select-down-modern",children:[e.labelName?(0,S.jsx)("label",{htmlFor:t,className:"pb4 mb0 fs12 d-b",children:e.labelName}):null,(0,S.jsxs)("div",{className:"p-r d-f ac",style:{width:e.width||"100%"},children:[(0,S.jsx)(re.Z,{style:{width:"100%"},disabled:e.disabled,id:t,placeholder:e.placeholder||"",maxLength:e.maxLength||200,onChange:function(e){return m(e.target.value)},onKeyPress:function(t){13===t.nativeEvent.keyCode&&(n.blur&&n.blur(),e.onSearch&&e.onSearch(t.currentTarget.value))},value:d,ref:function(e){return n=e}}),(0,S.jsx)(he.Z,{className:"p-a r0 mr8"})]}),i.length?(0,S.jsxs)("ul",{className:"select-option shadow",onScroll:function(n){n.stopPropagation();var t=n.currentTarget,a=t.scrollTop,r=t.clientHeight;t.scrollHeight-r-a<20&&e.onScrollButtom&&p()},style:{maxHeight:"".concat(e.maxHeight,"px")},children:[e.loading?(0,S.jsx)("div",{className:"p-s z9 ta-r",style:{right:"".concat(0,"px"),top:"".concat(0,"px")},children:(0,S.jsx)("div",{className:"d-il p-a",style:{right:"".concat(8,"px"),top:"".concat(0,"px")}})}):null,i.map((function(n,t){return(0,S.jsx)("li",{className:"ellip1",onMouseDown:function(){return function(n){m(n),e.onClick&&e.onClick(n)}(n)},children:h(n)},t)}))]}):null]})}var Ze=["key","name"];function ve(e){return e.reduce((function(e,n){return e+(n||"").split("").reduce((function(e,n){return e+n.charCodeAt(0)}),0)}),0)}function xe(e){var n=(0,o.useState)(0),t=(0,c.Z)(n,2),l=t[0],s=t[1],u=(0,o.useState)(e.config),d=(0,c.Z)(u,2),f=d[0],m=d[1],h=(0,o.useRef)(e.config),p=function(e){h.current=e,m(e)},Z=(0,o.useState)(e.configGroup),v=(0,c.Z)(Z,2),x=v[0],j=v[1],y=(0,o.useRef)(e.configGroup),b=function(e){y.current=e,j(e)},k=function(n,t){var c=function(n,t){return t.filter((function(e){return e.dep.includes(n)})).map((function(n){var t=ve(n.dep.map((function(n){var t;return null===(t=e.form)||void 0===t?void 0:t.getFieldValue(n)})).filter((function(e){return!(void 0===e||null===e)})));return{effect:n.effect,option:n.effectOption[t]||[]}}))}(n,t);c.forEach((function(n){var t;null===(t=e.form)||void 0===t||t.setFieldsValue((0,r.Z)({},n.effect,void 0)),function(e,n){var t=h.current?(0,a.Z)(h.current):[];if(t)for(var r=0;r<t.length;r++){var c=t[r];c.name===e&&(t[r]=(0,i.Z)((0,i.Z)({},c),n))}p(t)}(n.effect,{options:n.option}),function(e,n){for(var t=y.current?(0,a.Z)(y.current):[],r=0;r<t.length;r++){for(var c=(0,a.Z)(t[r].config),o=0;o<c.length;o++){var l=c[o];l.name===e&&(c[o]=(0,i.Z)((0,i.Z)({},l),n))}t[r]=(0,i.Z)((0,i.Z)({},t[r]),{},{config:c})}b(t)}(n.effect,{options:n.option})}))};(0,o.useEffect)((function(){if(e.formChangeRes&&e.linkageConfig){var n=e.formChangeRes.currentChange;k(Object.keys(n)[0],e.linkageConfig)}}),[e.formChangeRes]),(0,o.useEffect)((function(){var n;p(e.config),b(e.configGroup);var t=(null===(n=e.form)||void 0===n?void 0:n.getFieldsValue())||{};Object.entries(t).forEach((function(n){var t=(0,c.Z)(n,2),a=t[0];void 0!==t[1]&&k(a,e.linkageConfig||[])}))}),[e.configGroup,e.config]);var _=function(){s(l+1)},C=function(e,n){return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(re.Z,{disabled:e.disable,placeholder:"\u8bf7\u8f93\u5165".concat(e.label)})}),"dynamicForm_".concat(e.name))},N=function(e,n){var t=(e.options||[]).map((function(e){return e.label}));return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(pe,{isOpenSearchMatch:!0,disabled:e.disable,placeholder:"\u8bf7\u9009\u62e9".concat(e.label),options:t})}),"dynamicForm_".concat(e.name))},O=function(e,n){return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(re.Z.TextArea,{autoSize:{minRows:4},disabled:e.disable,placeholder:"\u8bf7\u8f93\u5165".concat(e.label)})}),"dynamicForm_".concat(e.name))},I=function(n,t){var a=n.options||[];return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:n.label,name:n.name,rules:n.rules,initialValue:n.defaultValue,extra:n.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:n.description}}):null},t),{},{children:(0,S.jsx)(fe.Z,{onClick:function(){var n;console.log("click",null===(n=e.form)||void 0===n?void 0:n.getFieldsValue())},style:{width:"100%"},mode:n.multiple?"multiple":void 0,onChange:function(t){n.data.retry_info&&e.onRetryInfoChange&&e.onRetryInfoChange(t)},showSearch:!0,disabled:n.disable,optionFilterProp:"label",placeholder:"\u8bf7\u9009\u62e9".concat(n.label),options:a})}),"dynamicForm_".concat(n.name))},P=function(e,n){var t=e.options||[];return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue},n),{},{children:(0,S.jsx)(se.ZP.Group,{options:t})}),"dynamicForm_".concat(e.name))},F=function(e,n){return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:"fromDate",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4"}]},n),{},{children:(0,S.jsx)(ue.Z,{showTime:!0,disabledDate:function(e){return e&&e>L()().endOf("day")}})}),"dynamicForm_".concat(e.name))},T=function(e,n){return(0,S.jsx)(U.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:"fromDate",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4"}]},n),{},{children:(0,S.jsx)(ue.Z,{showTime:!0,disabledDate:function(e){return e&&e>L()().endOf("day")}})}),"dynamicForm_".concat(e.name))},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"input":case"match-input":return C(e,n);case"input-select":return N(e,n);case"textArea":return O(e,n);case"select":return I(e,n);case"datePicker":return F(e,n);case"rangePicker":return T(e,n);case"radio":return P(e,n);default:return null}},V=function(e){return(e||[]).map((function(e){return e.list&&e.list.length?(0,S.jsx)(U.Z.List,{name:e.name,children:function(n,t){var a=t.add,r=t.remove;return(0,S.jsxs)(S.Fragment,{children:[n.map((function(n){var t=n.key,a=n.name,c=(0,w.Z)(n,Ze);return(0,S.jsxs)("div",{className:"bor b-side pt32 plr16 mb16",children:[e.list&&e.list.map((function(e){return E(e,(0,i.Z)((0,i.Z)({},c),{},{name:[a,e.name]}))})),(0,S.jsx)(U.Z.Item,{wrapperCol:{offset:5},children:(0,S.jsx)(g.Z,{danger:!0,onClick:function(){return r(a)},block:!0,icon:(0,S.jsx)(me.Z,{}),children:"\u5220\u9664\u8be5\u9879"})})]},t)})),(0,S.jsx)(U.Z.Item,{noStyle:!0,className:"w100",children:(0,S.jsx)(g.Z,{type:"dashed",className:"w100",onClick:function(){return a()},block:!0,icon:(0,S.jsx)(B.Z,{}),children:"\u589e\u52a0\u4e00\u9879"})})]})}},"dynamicForm_".concat(e.name)):E(e)}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(U.Z.Item,{name:e.primaryKey||"id",noStyle:!0,hidden:!0,children:(0,S.jsx)(re.Z,{})},"dynamicForm_id"),x&&x.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(de.Z,{current:l,children:(x||[]).map((function(e,n){return(0,S.jsx)(de.Z.Step,{title:e.group},n)}))}),(0,S.jsx)("div",{className:"pt32",children:(x||[]).map((function(e,n){return(0,S.jsx)("div",{className:[l===n?"p-r z9":"p-a z-99 v-h l-10000"].join(" "),children:V(e.config)},n)}))}),(0,S.jsxs)("div",{className:"ta-c pt32",children:[l>0&&(0,S.jsx)(g.Z,{onClick:function(){s(l-1)},children:"\u4e0a\u4e00\u6b65"}),l<(x||[]).length-1&&(0,S.jsx)(g.Z,{type:"primary",className:"ml16",onClick:function(){if(e.form){var n=x[l].config.map((function(e){return e.name}));e.form.validateFields(n).then((function(){_()})).catch((function(e){console.log(e)}))}else _()},children:"\u4e0b\u4e00\u6b65"}),(0,S.jsx)("div",{children:l===(x||[]).length-1&&(0,S.jsx)("div",{className:"pt8 c-hint-b",children:"\u70b9\u51fb\u786e\u5b9a\u5b8c\u6210\u63d0\u4ea4"})})]})]}):V(f||[])]})}function ge(e){var n=(0,W.s0)(),t=(0,W.TH)(),b=(0,o.useState)([]),k=(0,c.Z)(b,2),w=k[0],C=k[1],N=(0,o.useState)(!0),O=(0,c.Z)(N,2),I=O[0],P=O[1],F=(0,o.useState)(!1),T=(0,c.Z)(F,2),E=T[0],V=T[1],M=(0,o.useState)("true"===(0,Q.jS)("isVisableAdd")||!1),H=(0,c.Z)(M,2),z=H[0],D=H[1],U=(0,o.useState)(!1),ee=(0,c.Z)(U,2),ne=ee[0],te=ee[1],ae=(0,o.useState)(!1),re=(0,c.Z)(ae,2),ie=re[0],ce=re[1],oe=(0,o.useState)(!1),se=(0,c.Z)(oe,2),ue=se[0],de=se[1],fe=(0,o.useState)(!1),me=(0,c.Z)(fe,2),he=me[0],pe=me[1],Ze=(0,o.useState)([]),ge=(0,c.Z)(Ze,2),je=ge[0],ye=ge[1],be=(0,o.useState)({startTime:L()().subtract(1,"d").startOf("day").format("YYYY-MM-DD HH:mm:ss"),endTime:L()().subtract(1,"d").endOf("day").format("YYYY-MM-DD HH:mm:ss")}),Se=(0,c.Z)(be,2),ke=(Se[0],Se[1],{current:1,pageSize:20,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:[20,50,100,500],showTotal:function(e){return"\u5171".concat(e,"\u6761")}}),_e=(0,o.useState)(ke),we=(0,c.Z)(_e,2),Ce=we[0],Ne=we[1],Oe=(0,o.useState)([]),Ie=(0,c.Z)(Oe,2),Pe=Ie[0],Fe=Ie[1],Te=(0,o.useState)([]),Ee=(0,c.Z)(Te,2),Ve=Ee[0],Me=Ee[1],He=(0,o.useState)([]),ze=(0,c.Z)(He,2),Re=ze[0],De=ze[1],Le=(0,o.useRef)(Re),Je=function(e){Le.current=e,De(e)},Ke=(0,o.useState)([]),qe=(0,c.Z)(Ke,2),Ae=qe[0],Be=qe[1],Ge=(0,o.useState)([]),Ye=(0,c.Z)(Ge,2),We=Ye[0],Qe=Ye[1],Ue=(0,o.useState)([]),Xe=(0,c.Z)(Ue,2),$e=Xe[0],en=Xe[1],nn=(0,o.useState)([]),tn=(0,c.Z)(nn,2),an=tn[0],rn=tn[1],cn={};try{cn=JSON.parse((0,Q.jS)("formData")||"{}")}catch(Jt){}var on=(0,o.useState)(cn),ln=(0,c.Z)(on,2),sn=ln[0],un=ln[1],dn=(0,o.useState)({}),fn=(0,c.Z)(dn,2),mn=fn[0],hn=fn[1],pn=(0,o.useState)({}),Zn=(0,c.Z)(pn,2),vn=Zn[0],xn=Zn[1],gn=(0,o.useRef)(vn),jn=(0,o.useState)([]),yn=(0,c.Z)(jn,2),bn=yn[0],Sn=yn[1],kn=(0,o.useState)(1e3),_n=(0,c.Z)(kn,2),wn=_n[0],Cn=_n[1],Nn=(0,o.useState)([]),On=(0,c.Z)(Nn,2),In=On[0],Pn=On[1],Fn=(0,o.useState)({}),Tn=(0,c.Z)(Fn,2),En=Tn[0],Vn=Tn[1],Mn=(0,o.useState)(),Hn=(0,c.Z)(Mn,2),zn=Hn[0],Rn=Hn[1],Dn=(0,o.useState)(),Ln=(0,c.Z)(Dn,2),Jn=Ln[0],Kn=Ln[1],qn=(0,o.useRef)(Jn),An=(0,o.useState)(!1),Bn=(0,c.Z)(An,2),Gn=Bn[0],Yn=Bn[1],Wn=(0,o.useState)(!1),Qn=(0,c.Z)(Wn,2),Un=Qn[0],Xn=Qn[1],$n=(0,o.useState)([]),et=(0,c.Z)($n,2),nt=et[0],tt=et[1],at=(0,o.useState)([]),rt=(0,c.Z)(at,2),it=rt[0],ct=rt[1],ot=(0,o.useState)(),lt=(0,c.Z)(ot,2),st=lt[0],ut=lt[1],dt=(0,o.useState)(""),ft=(0,c.Z)(dt,2),mt=ft[0],ht=ft[1],pt=(0,o.useState)(""),Zt=(0,c.Z)(pt,2),vt=Zt[0],xt=Zt[1],gt=(0,o.useState)(),jt=(0,c.Z)(gt,2),yt=jt[0],bt=jt[1],St=(0,o.useState)(),kt=(0,c.Z)(St,2),_t=kt[0],wt=kt[1],Ct=(0,o.useState)(!1),Nt=(0,c.Z)(Ct,2),Ot=(Nt[0],Nt[1],(0,o.useState)([])),It=(0,c.Z)(Ot,2),Pt=It[0],Ft=It[1],Tt=(0,o.useState)(""),Et=(0,c.Z)(Tt,2),Vt=Et[0],Mt=Et[1],Ht={pageConf:ke,params:[],paramsMap:En,sorter:void 0};(0,o.useEffect)((function(){Mt((0,Q.W9)())}),[]),(0,o.useEffect)((function(){e&&e.disable&&n("/404")}),[]);var zt=function e(n,t,a){return n.map((function(n,r){var c=n["ui-type"]||"input";"select2"===c&&(c="select");var o=n.label||t[n.name],l=(n.validators||[]).map((function(e){if("select"===c)return"DataRequired"===e.type?{required:!0,message:"\u8bf7\u9009\u62e9".concat(o)}:void 0;switch(e.type){case"DataRequired":return{required:!0,message:"\u8bf7\u8f93\u5165".concat(o)};case"Regexp":return{pattern:new RegExp("".concat(e.regex)),message:"\u8bf7\u6309\u6b63\u786e\u7684\u89c4\u5219\u8f93\u5165"};case"Length":return{min:e.min||0,max:e.max,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u957f\u5ea6"};default:return}})).filter((function(e){return!!e})),s=e(n.info||[],t,a);return{label:o,type:c,rules:l,list:s,name:n.name,disable:n.disable,description:n.description||a[n.name]||void 0,required:n.required,defaultValue:""===n.default?void 0:n.default,multiple:n["ui-type"]&&"select2"===n["ui-type"],options:(n.values||[]).map((function(e){return{label:e.value,value:e.id}})),data:(0,i.Z)({},n)}}))};(0,o.useEffect)((function(){var o=(0,Q.jS)("targetId"),h=o?"/dimension_remote_table_modelview/".concat(o,"/api/"):null===e||void 0===e?void 0:e.url;V(!0),(0,$.BQ)(h).then((function(o){var h=o.data,p=h.list_columns,Z=h.label_columns,v=h.filters,x=h.add_columns,g=h.edit_columns,j=h.permissions,y=h.description_columns,b=h.add_fieldsets,k=h.edit_fieldsets,_=h.help_url,w=h.order_columns,C=h.action,N=h.route_base,O=h.column_related,I=h.primary_key,P=h.label_title,F=h.cols_width,T=h.import_data,E=h.download_data,M=h.list_ui_type,H=h.list_ui_args,z=(null===e||void 0===e?void 0:e.related)||j.includes("can_show")||j.includes("can_edit")||j.includes("can_delete"),R=localStorage.getItem("tablebox_".concat(t.pathname)),D=JSON.parse(R||"[]").reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.dataIndex,n.width))}),{}),L=Object.entries(O||{}).reduce((function(e,n){var t=(0,c.Z)(n,2),o=(t[0],t[1]);return[].concat((0,a.Z)(e),[{dep:o.src_columns,effect:o.des_columns.join(""),effectOption:o.related.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},ve(n.src_value),n.des_value.map((function(e){return{label:e,value:e}}))))}),{})}])}),[]),q=p.map((function(e){return{title:Z[e]||e,dataIndex:e,key:e,sorter:w.includes(e)?function(n,t){return n[e]-t[e]}:void 0,render:function(n,t){var r;if(void 0===n||""===n)return"-";if(F[e]&&-1!==(null===(r=F[e].type)||void 0===r?void 0:r.indexOf("ellip")))return(0,S.jsx)(l.Z,{title:(0,S.jsx)("span",{className:"tips-content",dangerouslySetInnerHTML:{__html:n}}),placement:"topLeft",children:(0,S.jsx)("div",{className:F[e].type,dangerouslySetInnerHTML:{__html:n}})});if("[object Object]"===Object.prototype.toString.call(n)){var i=Object.entries(n).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{label:r,value:i}])}),[]);return i.length?(0,S.jsx)("div",{style:{overflow:"auto",maxHeight:100},children:i.map((function(e,n){return(0,S.jsxs)("div",{children:[Z[e.label]||e.label,":",e.value]},"table_itemvalue_".concat(n))}))}):"-"}return(0,S.jsx)("div",{style:{overflow:"auto",maxHeight:100},dangerouslySetInnerHTML:{__html:n}})},width:D[e]||F[e]&&F[e].width||100}})),A=Object.entries(C||{}).reduce((function(e,n){var t=(0,c.Z)(n,2),r=(t[0],t[1]);return[].concat((0,a.Z)(e),[(0,i.Z)({},r)])}),[]),B=A.filter((function(e){return!!e.multiple})),G=A.filter((function(e){return!!e.single})),Y={title:"\u64cd\u4f5c",width:80,dataIndex:"handle",key:"handle",align:"right",fixed:"right",render:function(a,r){var c;return(0,S.jsx)(s.Z,{size:"middle",children:z?(0,S.jsx)(u.Z,{overlay:(0,S.jsxs)(d.Z,{children:[j.includes("can_show")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){pe(!0),Dt(r[I])},children:"\u8be6\u60c5"})}):null,j.includes("can_edit")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){ce(!0),(0,$.BQ)(N,r[I]).then((function(e){var n=e.data,t=n.edit_columns,a=n.label_columns,i=n.description_columns,c=zt(t,a,i),o=k.map((function(e){var n=e.fields.map((function(e){return ae[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:zt(n,a,i)}}));Qe(c),rn(o),Dt(r[I])})).catch((function(){f.ZP.warn("\u7528\u6237\u6ca1\u6709\u4fee\u6539\u6743\u9650")}))},children:"\u4fee\u6539"})}):null,j.includes("can_delete")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"c-fail cp",onClick:function(){m.Z.confirm({title:"\u5220\u9664",icon:(0,S.jsx)(J.Z,{}),content:"\u786e\u5b9a\u5220\u9664?",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:function(){return new Promise((function(e,n){(0,$.aM)("".concat(N).concat(r[I])).then((function(n){e("")})).catch((function(e){n()}))})).then((function(e){f.ZP.success("\u5220\u9664\u6210\u529f"),Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:Ce,params:Le.current,paramsMap:v}))})).catch((function(){f.ZP.error("\u5220\u9664\u5931\u8d25")}))},onCancel:function(){}})},children:"\u5220\u9664"})}):null,null===e||void 0===e||null===(c=e.related)||void 0===c?void 0:c.map((function(e,a){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){n("".concat(t.pathname,"/").concat(e.name,"?id=").concat(r[I]))},children:e.title})},"moreAction_".concat(a))})),!!G.length&&G.map((function(e,n){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){m.Z.confirm({title:e.confirmation,icon:(0,S.jsx)(J.Z,{}),content:"",okText:"\u786e\u8ba4".concat(e.confirmation),cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(n,t){(0,$.y5)("".concat(N,"action/").concat(e.name,"/").concat(r[I])).then((function(e){n(e)})).catch((function(e){t(e)}))})).then((function(e){f.ZP.success("\u64cd\u4f5c\u6210\u529f"),e.data.result.link&&window.open(e.data.result.link,"bank"),Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:Ce,params:Le.current,paramsMap:v}))})).catch((function(){f.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}})},children:e.text})},"table_action_".concat(n))}))]}),children:(0,S.jsxs)("div",{className:"link",children:["\u66f4\u591a",(0,S.jsx)(K.Z,{})]})}):null})}},W=(0,a.Z)(q);z&&W.push(Y);var U=x.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{});if(cn&&Object.keys(cn).length){var X=(Object.keys(cn)||[]).filter((function(e){return cn[e]&&U[e]&&U[e].retry_info})),ee=X.length;if(X.length){var ne=cn;for(var te in ne){if(Object.prototype.hasOwnProperty.call(ne,te))void 0===ne[te]&&delete ne[te]}!function e(n){ee-=1,(0,$.y1)("".concat(N,"_info"),{exist_add_args:n}).then((function(n){var t=n.data,a=t.add_columns,c=t.label_columns,o=t.description_columns,l=t.add_fieldsets,s=a.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{}),u=zt(a,c,o),d=l.map((function(e){var n=e.fields.map((function(e){return s[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:zt(n,c,o)}})),f=a.filter((function(e){return""!==e.default})).map((function(e){return(0,r.Z)({},e.name,e.default)})).reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),n)}),{});if(un(f),Be(u),en(d),ee){var m=JSON.stringify(f);e(m)}})).catch((function(e){f.ZP.error("\u5b57\u6bb5\u5207\u6362\u9519\u8bef")})).finally((function(){V(!1)}))}(JSON.stringify(ne))}}var ae=g.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{});g.forEach((function(e){"list"===e["ui-type"]&&e.info.forEach((function(e){ae[e.name]=e}))}));var re=zt(x,Z,y),ie=b.map((function(e){var n=e.fields.map((function(e){return U[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:zt(n,Z,y)}})),oe=Object.entries(v).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{name:r,type:i["ui-type"]||"input",title:Z[r],oprList:i.filter.map((function(e){return e.operator})),defalutValue:""===i.default?void 0:i.default,option:i.values?i.values.map((function(e){return{label:e.value,value:e.id}})):void 0}])}),[]),le=Object.entries(v).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{key:r,value:i.default}])}),[]).filter((function(e){return e.value})),se=JSON.parse(localStorage.getItem("filter_".concat(t.pathname).concat(t.search))||"[]"),ue=void 0;if((0,Q.jS)("filter"))try{ue=JSON.parse((0,Q.jS)("filter")||"[]")}catch(he){f.ZP.error("filter\u89e3\u6790\u5f02\u5e38")}var de,fe=ue||se;fe&&fe.length&&(le=fe),Ft(p),bt(M),wt(H),Xn(E),Yn(T),xt(P),ht(I),tt(L),ct(B),de=N,qn.current=de,Kn(de),hn(ae),Vn(v),Fe(W),Me(oe),Be(re),en(ie),function(e){gn.current=e,xn(e)}(Z),Pn(j);var me=R?W.reduce((function(e,n){return e+n.width||100}),0)+80:100*W.length+80+80;Cn(me),Rn(_),Je(le),Rt({pageConf:ke,params:le,paramsMap:v,sorter:void 0})})).catch((function(e){console.log(e)})).finally((function(){P(!1),V(!1)}))}),[]);var Rt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageConf:ke,params:Re,paramsMap:En,sorter:void 0},t=n.pageConf,r=n.params,c=n.paramsMap,o=n.sorter;P(!0);var l=void 0,s=(0,Q.jS)("id");l=JSON.stringify((0,i.Z)({str_related:1,filters:[s?{col:null===e||void 0===e?void 0:e.model_name,opr:"rel_o_m",value:+s}:void 0].concat((0,a.Z)(r.filter((function(e){return void 0!==e.value})).map((function(e){for(var n="",t=["rel_o_m","ct","eq"],a=c[e.key].filter.map((function(e){return e.operator}))||[],r=0;r<t.length;r++){var i=t[r];if(a.includes(i)){n=i;break}}return{col:e.key,opr:n,value:e.value}})))).filter((function(e){return!!e})),page:(t.current||1)-1,page_size:t.pageSize||10},o)),(0,$.jm)(qn.current,{form_data:l}).then((function(e){var n=e.data.result,a=n.count,r=n.data;C(r),ye([]),Ne((0,i.Z)((0,i.Z)((0,i.Z)({},ke),t),{},{total:a})),ut(o)})).catch((function(e){console.log(e)})).finally((function(){return P(!1)}))},Dt=function(e){de(!0),Sn([]),(0,$.kI)("".concat(qn.current).concat(e)).then((function(e){var n=e.data.result,t=[],a=function(e){return"[object Object]"===Object.prototype.toString.call(e)?e.last_name:e};Object.keys(n).forEach((function(e){t.push({label:gn.current[e]||e,value:a(n[e]),key:e})})),Sn(t)})).catch((function(e){})).finally((function(){de(!1)}))},Lt={name:"csv_file",maxCount:1,action:"".concat(Jn,"upload/"),headers:{authorization:"authorization-text"},beforeUpload:function(e){var n=-1!==e.name.indexOf(".csv");return n||f.ZP.error("".concat(e.name," \u5e76\u4e0d\u662fcsv\u6587\u4ef6")),n||h.Z.LIST_IGNORE},onChange:function(e){"done"===e.file.status?p.Z.success({message:"\u5bfc\u5165\u6210\u529f",description:JSON.stringify(e.file.response)}):"error"===e.file.status&&p.Z.error({message:"\u5bfc\u5165\u5931\u8d25",description:JSON.stringify(e.file.response)})}};return(0,S.jsxs)("div",{className:"fade-in",children:[(0,S.jsx)(X,{title:"\u6dfb\u52a0".concat(vt),width:1500,formData:sn,loading:E,visible:z,onCancel:function(){D(!1)},onCreate:function(e,n){for(var t in V(!0),e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=e[t];if(Array.isArray(a)){if(a[0]&&"[object Object]"===Object.prototype.toString.call(a[0]))continue;e[t]=e[t].join(",")}}(0,$.P9)(qn.current,e).then((function(e){f.ZP.success("\u6dfb\u52a0".concat(vt,"\u6210\u529f")),n.resetFields(),D(!1),Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:Ce,params:Re,sorter:st,paramsMap:En}))})).catch((function(e){f.ZP.error("\u6dfb\u52a0".concat(vt,"\u5931\u8d25"))})).finally((function(){V(!1)}))},children:function(e,n){return(0,S.jsx)(xe,{form:e,onRetryInfoChange:function(n){V(!0);var t=e.getFieldsValue();for(var a in t){if(Object.prototype.hasOwnProperty.call(t,a))void 0===t[a]&&delete t[a]}var c=JSON.stringify(t);e.resetFields(),(0,$.y1)("".concat(qn.current,"_info"),{exist_add_args:c}).then((function(n){var t=n.data,a=t.add_columns,c=t.label_columns,o=t.description_columns,l=t.add_fieldsets,s=a.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{}),u=zt(a,c,o),d=l.map((function(e){var n=e.fields.map((function(e){return s[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:zt(n,c,o)}})),f=a.filter((function(e){return""!==e.default})).map((function(e){return(0,r.Z)({},e.name,e.default)})).reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),n)}),{});e.setFieldsValue(f),Be(u),en(d)})).catch((function(e){f.ZP.error("\u5b57\u6bb5\u5207\u6362\u9519\u8bef")})).finally((function(){V(!1)}))},formChangeRes:n,linkageConfig:nt,config:Ae,configGroup:$e})}}),(0,S.jsx)(X,{title:"\u4fee\u6539".concat(vt),width:1500,formData:bn.reduce((function(e,n){if("select"===(mn[n.key]||{})["ui-type"]){var t=n.value,a=(mn[n.key]||{}).values||[],c=a.map((function(e){return e.value})).indexOf(n.value);return~c&&(t=a[c].id),(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,t))}if("select2"===(mn[n.key]||{})["ui-type"])return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,(n.value||"").split(",")));if("datePicker"===(mn[n.key]||{})["ui-type"]){var o=n.value;return o=L()(o),(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,o))}if("list"===(mn[n.key]||{})["ui-type"]){var l=(n.value||[]).map((function(e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n];"datePicker"===(mn[n]||{})["ui-type"]&&(e[n]=L()(t))}return e}));return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,l))}return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,n.value))}),{}),loading:ne||ue,visible:ie,onCancel:function(){ce(!1)},onCreate:function(e){for(var n in te(!0),Sn([]),e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n];if(Array.isArray(t)){if(t[0]&&"[object Object]"===Object.prototype.toString.call(t[0]))continue;e[n]=e[n].join(",")}}(0,$.a1)("".concat(qn.current).concat(e[mt]),e).then((function(e){f.ZP.success("\u66f4\u65b0".concat(vt,"\u6210\u529f")),ce(!1),Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:Ce,params:Re,sorter:st,paramsMap:En}))})).catch((function(e){f.ZP.error("\u66f4\u65b0".concat(vt,"\u5931\u8d25"))})).finally((function(){te(!1)}))},children:function(e){return(0,S.jsx)(xe,{form:e,primaryKey:mt,config:We,linkageConfig:nt,configGroup:an})}}),(0,S.jsx)(m.Z,{title:"".concat(vt,"\u8be6\u60c5"),visible:he,footer:null,width:800,destroyOnClose:!0,onCancel:function(){pe(!1)},children:(0,S.jsx)(Z.Z,{spinning:ue,children:(0,S.jsx)("div",{className:"pb32",style:{minHeight:300},children:bn.map((function(e,n){return(0,S.jsxs)(v.Z,{className:"mb16",children:[(0,S.jsx)(x.Z,{span:6,children:(0,S.jsx)("div",{className:"ta-r",children:(0,S.jsxs)("strong",{children:[e.label,"\uff1a"]})})}),(0,S.jsx)(x.Z,{span:18,children:(0,S.jsx)("pre",{style:{whiteSpace:"break-spaces"},dangerouslySetInnerHTML:{__html:function(){var n=e.value;if("[object Object]"===Object.prototype.toString.call(e.value)||"[object Array]"===Object.prototype.toString.call(e.value))try{n=JSON.stringify(e.value)}catch(t){}return n}()}})})]},"dataDetail_".concat(n))}))})})}),(0,S.jsx)(_,{title:(0,S.jsxs)(S.Fragment,{children:[null!==e&&void 0!==e&&e.isSubRoute||(0,Q.jS)("targetId")?(0,S.jsxs)(g.Z,{className:"mr16",onClick:function(){n("/data/metadata/metadata_dimension"),window.location.reload()},children:[(0,S.jsx)(q.Z,{}),"\u8fd4\u56de"]}):null,(0,S.jsx)("span",{children:vt})]}),breadcrumbs:((null===e||void 0===e?void 0:e.breadcrumbs)||[]).map((function(n,t){return(0,S.jsxs)("span",{className:"c-hint-b fs12",children:["/",(0,S.jsx)("span",{className:"plr2",children:n})]},"templateTitle_".concat(null===e||void 0===e?void 0:e.name,"_").concat(t))})),children:zn?(0,S.jsxs)("div",{className:"link",children:[(0,S.jsx)("span",{className:"pr4",onClick:function(){window.open(zn,"blank")},children:"\u5e2e\u52a9\u94fe\u63a5"}),(0,S.jsx)(A.Z,{})]}):null}),(0,S.jsxs)(y.VY,{className:"appmgmt-content bg-title",children:[!!Ve.length&&(0,S.jsx)(le,{values:Re,params:Ve,onChange:function(e){localStorage.setItem("filter_".concat(t.pathname).concat(t.search),JSON.stringify(e)),Je(e),Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:ke,params:e,sorter:st,paramsMap:En}))}}),(0,S.jsx)("div",{className:"m16",children:"card"!==yt?(0,S.jsx)(R,{cancelExportData:!0,tableKey:"tablebox_".concat(t.pathname),titleNode:(0,S.jsxs)(x.Z,{className:"tablebox-title",children:[vt,"\u5217\u8868"]}),buttonNode:(0,S.jsxs)("div",{className:"d-f ac",children:[In.includes("can_add")?(0,S.jsxs)(g.Z,{className:"mr16",type:"primary",onClick:function(){return D(!0)},children:["\u6dfb\u52a0",vt,(0,S.jsx)(B.Z,{})]}):null,(0,S.jsx)("div",{children:(0,S.jsx)(u.Z,{overlay:(0,S.jsx)(d.Z,{children:it.map((function(e,n){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("span",{className:"link",onClick:function(){return function(e){je.length?m.Z.confirm({title:e.confirmation,icon:(0,S.jsx)(J.Z,{}),content:"",okText:"\u786e\u8ba4".concat(e.confirmation),cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(n,t){(0,$.Eb)("".concat(qn.current,"multi_action/").concat(e.name),{ids:je.map((function(e){return JSON.parse(e||"{}")[mt]}))}).then((function(e){n("")})).catch((function(e){t()}))})).then((function(e){f.ZP.success("\u64cd\u4f5c\u6210\u529f"),Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:Ce,params:Re,sorter:st,paramsMap:En}))})).catch((function(){f.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}}):f.ZP.warn("\u8bf7\u5148\u9009\u62e9")}(e)},children:"\u6279\u91cf".concat(e.text)})},"table_muliple_".concat(n))}))}),children:(0,S.jsxs)(g.Z,{children:["\u6279\u91cf\u64cd\u4f5c ",(0,S.jsx)(K.Z,{})]})})}),Gn?(0,S.jsx)("div",{className:"d-f ml16",children:(0,S.jsx)(l.Z,{color:"#fff",title:(0,S.jsxs)("span",{className:"tips-content-b",children:["\u6ce8\u610f\uff1acsv\u9017\u53f7\u5206\u9694\uff0c\u7b2c\u4e00\u884c\u4e3a\u5217\u7684\u82f1\u6587\u540d ",(0,S.jsx)("span",{className:"link",onClick:function(){window.open("".concat(window.location.origin).concat(qn.current,"download_template"))},children:"\u4e0b\u8f7d\u5bfc\u5165\u6a21\u677f"})]}),placement:"topLeft",children:(0,S.jsx)(h.Z,(0,i.Z)((0,i.Z)({},Lt),{},{children:(0,S.jsx)(g.Z,{className:"",icon:(0,S.jsx)(G.Z,{}),children:"\u6279\u91cf\u5bfc\u5165\u6570\u636e"})}))})}):null,Un?(0,S.jsxs)(g.Z,{className:"ml16",onClick:function(){m.Z.confirm({title:"\u5bfc\u51fa\u6570\u636e",icon:(0,S.jsx)(J.Z,{}),content:"",okText:"\u786e\u8ba4\u5bfc\u51fa\u6570\u636e",cancelText:"\u53d6\u6d88",onOk:function(){window.open("".concat(window.location.origin).concat(qn.current,"download")),f.ZP.success("\u5bfc\u51fa\u6210\u529f")},onCancel:function(){}})},children:["\u6279\u91cf\u5bfc\u51fa  ",(0,S.jsx)(Y.Z,{})]}):null]}),rowKey:function(e){return JSON.stringify(e)},columns:Pe,loading:I,pagination:Ce,dataSource:w,onChange:function(e,n,t){var a=t.order?{order_column:t.columnKey,order_direction:"ascend"===t.order?"asc":"desc"}:void 0;Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:e,params:Re,paramsMap:En,sorter:a}))},rowSelection:{type:"checkbox",fixed:"left",columnWidth:80,selectedRowKeys:je,onChange:function(e){ye(e)}},scroll:{x:wn,y:Vt}}):(0,S.jsxs)("div",{className:"bg-w p16",children:[(0,S.jsx)("div",{className:"d-f fw",children:w.map((function(e,n){return(0,S.jsx)("div",{style:{overflowY:"auto",width:null===_t||void 0===_t?void 0:_t.card_width,height:null===_t||void 0===_t?void 0:_t.card_height},className:"card-row mr16 mb16",children:Object.keys(e).map((function(t,a){return Pt.includes(t)?(0,S.jsx)("div",{style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:e[t]}},"row".concat(n).concat(a)):null}))},"card".concat(n))}))}),(0,S.jsx)("div",{className:"ta-r",children:(0,S.jsx)(j.Z,(0,i.Z)((0,i.Z)({},Ce),{},{onChange:function(e,n){Rt((0,i.Z)((0,i.Z)({},Ht),{},{pageConf:(0,i.Z)((0,i.Z)({},Ce),{},{current:e,pageSize:n}),params:Re,paramsMap:En}))}}))})]})})]})]})}},602:function(e,n,t){e.exports=t.p+"static/media/emptyBg.15fdf5f39309784ac66e.png"}}]);
//# sourceMappingURL=477.977e8f36.chunk.js.map